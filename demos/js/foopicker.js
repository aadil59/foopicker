var FooPicker=function(){"use strict";function e(){var e,r=this,a={className:"foopicker",dateFormat:"dd-MM-yyyy"};arguments[0]&&"object"==typeof arguments[0]&&(r.options=t(a,arguments[0]),e=r.options.id),r.showPicker=function(){r.buildPicker();var t=document.getElementById(e),n=t.offsetLeft,a=t.offsetTop+t.offsetHeight-7,o=document.getElementById("foopicker-"+e);o.style.position="absolute",o.style.top=a+"px",o.style.left=n+"px"},r.hidePicker=function(t){setTimeout(function(){if(r.monthChange)document.getElementById(r.options.id).focus(),r.monthChange=!1;else{r.removeListeners(e);var t=document.getElementById("foopicker-"+e);t.innerHTML=""}},210)},r.selectDate=function(){r.monthChange=!1;var t=document.getElementById(event.target.id);t.classList.add("foopicker__day--selected");var n=t.dataset.day+"/"+t.dataset.month+"/"+t.dataset.year;r.selectedDate=n,r.selectedDay=parseInt(t.dataset.day),r.selectedMonth=parseInt(t.dataset.month),r.selectedYear=parseInt(t.dataset.year),document.getElementById(e).value=n,r.hidePicker()},r.removeListeners=function(e){for(var t=document.getElementById(e),n=t.getElementsByClassName("foopicker__day"),a=0;a<n.length;a++)if("function"==typeof n[a].onclick){var o=document.getElementById(e+"-foopicker__day--"+(a+1));s(o,"click",r.selectDate,!1)}},r.changeMonth=function(t){var n=t.target.className,a=!1;-1!==n.indexOf("foopicker__arrow--next")&&(a=!0),r.monthChange=!0;var o=r.currentDate,i=a?r.currentMonth+1:r.currentMonth-1,c=r.currentYear;r.currentMonth=i,f.date=new Date(c,i,o);var d=document.getElementById("foopicker-"+e),s=d.querySelector(".foopicker");s.innerHTML=f.buildHeader()+f.buildCalendar(),f.addListeners(r)},r.buildPicker=function(){var t=document.getElementById("foopicker-"+e);if(!c(t)){var n,a;n=document.createDocumentFragment(),a=document.createElement("div"),a.className=r.options.className;var o;o=r.selectedDate?new Date(r.selectedYear,r.selectedMonth-1,r.selectedDay):new Date,f.date=o,a.innerHTML=f.buildHeader()+f.buildCalendar(),n.appendChild(a),t.appendChild(n),f.addListeners(r)}},r.buildTemplate=function(){var t=document.createElement("div");t.id="foopicker-"+e,document.body.appendChild(t),n(r)},r.buildTemplate()}function t(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(e){var t=document.getElementById(e.options.id);d(t,"click",e.showPicker,!1),d(t,"blur",e.hidePicker,!1)}function r(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return e>=0?t[e]:t}function a(e,t){return[31,i(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}function o(e,t,n){return new Date(n,t,e).getDay()}function i(e){return e%100===0?e%400===0?!0:!1:e%4===0}function c(e){return e.querySelector(".foopicker")?!0:!1}function d(e,t,n,r){l?e.addEventListener(t,n,r):e.attachEvent("on"+t,n)}function s(e,t,n,r){l?e.removeEventListener(t,n,r):e.detachEvent("on"+t,n)}var l=window.addEventListener,u=["M","T","W","T","F","S","S"],f={date:new Date,day:function(){return this.date.getDay()},today:function(){return this.date.getDate()},month:function(){return this.date.getMonth()},year:function(){return this.date.getFullYear()},rowPadding:function(){var e=o(1,this.month(),this.year());return[6,0,1,2,3,4,5][e]},buildHeader:function(){return'<div class="foopicker__header"><div class="foopicker__arrow foopicker__arrow--prev"></div><div class="foopicker__month">'+r(this.month())+"&nbsp;&nbsp;"+this.year()+'</div><div class="foopicker__arrow foopicker__arrow--next"></div></div>'},buildCalendar:function(){var e,t=a(this.year(),this.month()),n='<div class="foopicker__calendar"><table><tr>';for(e=0;e<u.length;e++)n+='<td><div class="foopicker__week">'+u[e]+"</div></td>";n+="</tr><tr>";for(var r=0,o="",i=0-this.rowPadding();t>i;i++)0>i?n+="<td></td>":(n+='<td><div class="foopicker__day '+o+'" ',n+='data-day="'+(i+1)+'" data-month="'+(this.month()+1),n+='" data-year="'+this.year()+'" ',n+=">"+(i+1)+"</div></td>"),r++,r%7===0&&(r=0,n+="</tr><tr>");return n+="</tr></table></div>"},addListeners:function(e){var t=e.options.id,n=document.getElementById("foopicker-"+t),r=n.getElementsByClassName("foopicker__arrow--prev")[0],a=n.getElementsByClassName("foopicker__arrow--next")[0];d(r,"click",e.changeMonth,!1),d(a,"click",e.changeMonth,!1),this.modifyDateClass(e);for(var o=n.getElementsByClassName("foopicker__day"),i=0;i<o.length;i++)if("function"!=typeof o[i].onclick){var c=document.getElementById(t+"-foopicker__day--"+(i+1));d(c,"click",e.selectDate,!1)}this.changeInstanceDate(e)},modifyDateClass:function(e){for(var t=e.options.id,n=e.selectedDay,r=e.selectedMonth-1,a=e.selectedYear,o=document.getElementById("foopicker-"+t),i=o.getElementsByClassName("foopicker__day"),c=0;c<i.length;c++)c+1===n&&this.month()===r&&this.year()===a?i[c].className="foopicker__day foopicker__day--selected":i[c].className="foopicker__day",c+1===e.currentDate&&this.month()===e.currentMonth-1&&this.year()===e.currentYear&&i[c].classList.add("foopicker__day--today"),i[c].id=t+"-foopicker__day--"+(c+1)},changeInstanceDate:function(e){e.currentDay=this.day(),e.currentDate=this.today(),e.currentMonth=this.month(),e.currentYear=this.year()}};return e}();