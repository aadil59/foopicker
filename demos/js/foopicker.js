var FooPicker=function(){"use strict";function e(){var e,r=this,a={className:"foopicker",dateFormat:"dd-MM-yyyy"};arguments[0]&&"object"==typeof arguments[0]&&(r.options=t(a,arguments[0]),e=r.options.id),r.showPicker=function(){r.buildPicker(),s(r),r.addListeners(e);var t=document.getElementById(e),o=t.offsetLeft,n=t.offsetTop+t.offsetHeight-7,a=document.getElementById("foopicker-"+e);a.style.position="absolute",a.style.top=n+"px",a.style.left=o+"px"},r.hidePicker=function(t){setTimeout(function(){if(!r.monthChange){r.removeListeners(e);var t=document.getElementById("foopicker-"+e);t.innerHTML=null}},150)},r.selectDate=function(){r.monthChange=!1;var t=document.getElementById(event.target.id);t.classList.add("foopicker__day--selected");var o=t.dataset.day+"/"+t.dataset.month+"/"+t.dataset.year;r.selectedDate=o,r.selectedDay=t.dataset.day,r.selectedMonth=t.dataset.month,r.selectedYear=t.dataset.year,document.getElementById(e).value=o},r.addListeners=function(e){for(var t=document.getElementById("foopicker-"+e),o=t.getElementsByClassName("foopicker__day"),n=0;n<o.length;n++)if("function"!=typeof o[n].onclick){var a=document.getElementById(e+"-foopicker__day--"+(n+1));d(a,"click",r.selectDate,!1)}var c=t.getElementsByClassName("foopicker__arrow--prev")[0],i=t.getElementsByClassName("foopicker__arrow--next")[0];d(c,"click",r.changeMonth,!1),d(i,"click",r.changeMonth,!1)},r.removeListeners=function(e){for(var t=document.getElementById(e),o=t.getElementsByClassName("foopicker__day"),n=0;n<o.length;n++)if("function"==typeof o[n].onclick){var a=document.getElementById(e+"-foopicker__day--"+(n+1));i(a,"click",r.selectDate,!1)}},r.changeMonth=function(t){var n,a=t.target.className;-1!==a.indexOf("foopicker__arrow--next")&&(n=!0),r.monthChange=!0;var c=r.currentDate,d=n?r.currentMonth+1:r.currentMonth-1,i=r.currentYear,s=new Date(i,d,c),l=document.getElementById("foopicker-"+e),u=l.querySelector(".foopicker");u.innerHTML=o(s)},r.buildPicker=function(){var t,n,a,c=document.getElementById("foopicker-"+e);t=document.createDocumentFragment(),n=document.createElement("div"),n.className=r.options.className;var d=new Date;r.currentDate=d.getDate(),r.currentDay=d.getDay(),r.currentMonth=d.getMonth(),r.currentYear=d.getFullYear(),a=o(d),n.innerHTML=a,t.appendChild(n),c.appendChild(t)},r.buildTemplate=function(){var t=document.createElement("div");t.id="foopicker-"+e,document.body.appendChild(t),n(r)},r.buildTemplate()}function t(e,t){var o;for(o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function o(e){var t=e.getDate(),o=e.getFullYear(),n=r(e.getMonth()),d=a(e.getMonth()),i=c(1,e.getMonth(),e.getFullYear()),s=[6,0,1,2,3,4,5][i],l='<div class="foopicker__header"><table><tr><td>';l+='<div class="foopicker__arrow foopicker__arrow--prev"></div></td><td>',l+='<div class="foopicker__month">'+n+"&nbsp;&nbsp;"+o+"</div>",l+='</td><td><div class="foopicker__arrow foopicker__arrow--next">',l+="</div></td></tr></table></div>",l+='<div class="foopicker__calendar"><table><tr>';for(var f=0;f<u.length;f++)l+='<td><div class="foopicker__week">'+u[f]+"</div></td>";l+="</tr><tr>";for(var m,p=0,y=0-s;d>y;y++)0>y?l+="<td></td>":(m=y===t-1?"foopicker__day--today":"",l+='<td><div class="foopicker__day '+m+'" ',l+='data-day="'+(y+1)+'" data-month="'+(e.getMonth()+1),l+='" data-year="'+o+'" ',l+=">"+(y+1)+"</div></td>"),p++,p%7===0&&(p=0,l+="</tr><tr>");return l+="</tr></table></div>"}function n(e){var t=document.getElementById(e.options.id);d(t,"click",e.showPicker,!1),d(t,"blur",e.hidePicker,!1)}function r(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return e>=0?t[e]:t}function a(e){return[31,28,31,30,31,30,31,31,30,31,30,31][e]}function c(e,t,o){return new Date(o,t,e).getDay()}function d(e,t,o,n){l?e.addEventListener(t,o,n):e.attachEvent("on"+t,o)}function i(e,t,o,n){l?e.removeEventListener(t,o,n):e.detachEvent("on"+t,o)}function s(e){for(var t=e.options.id,o=parseInt(e.selectedDay),n=document.getElementById("foopicker-"+t),r=n.getElementsByClassName("foopicker__day"),a=0;a<r.length;a++)a+1===o?r[a].className="foopicker__day foopicker__day--selected":r[a].className="foopicker__day",a+1===e.currentDate&&r[a].classList.add("foopicker__day--today"),r[a].id=t+"-foopicker__day--"+(a+1)}var l=window.addEventListener,u=["M","T","W","T","F","S","S"];return e}();